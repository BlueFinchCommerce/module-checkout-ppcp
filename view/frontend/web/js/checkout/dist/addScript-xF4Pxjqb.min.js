import{b as t,w as e,d as a,m as p,e as n,i as o,f as r,t as c,g as s,h as _,j as i,k as l,l as d,p as y,q as u}from"./runtime-core.esm-bundler-Cy50Z7f_.min.js";
/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let g;const f=t=>g=t,m=Symbol();function h(t){return t&&"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)&&"function"!=typeof t.toJSON}var b;!function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"}(b||(b={}));const v="undefined"!=typeof window,C="undefined"!=typeof __VUE_PROD_DEVTOOLS__&&__VUE_PROD_DEVTOOLS__&&v,O=()=>{};function L(t,e,a,p=O){t.push(e);const n=()=>{const a=t.indexOf(e);a>-1&&(t.splice(a,1),p())};return!a&&i()&&l(n),n}function A(t,...e){t.slice().forEach((t=>{t(...e)}))}const P=t=>t();function $(t,e){t instanceof Map&&e instanceof Map&&e.forEach(((e,a)=>t.set(a,e))),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const a in e){if(!e.hasOwnProperty(a))continue;const p=e[a],n=t[a];h(n)&&h(p)&&t.hasOwnProperty(a)&&!o(p)&&!r(p)?t[a]=$(n,p):t[a]=p}return t}const S=Symbol();const{assign:w}=Object;function x(_,i,l={},d,y,u){let g;const m=w({actions:{}},l),v={deep:!0};let x,M,j,E=[],I=[];const k=d.state.value[_];u||k||(d.state.value[_]={});const T=t({});let D;function q(t){let e;x=M=!1,"function"==typeof t?(t(d.state.value[_]),e={type:b.patchFunction,storeId:_,events:j}):($(d.state.value[_],t),e={type:b.patchObject,payload:t,storeId:_,events:j});const a=D=Symbol();s().then((()=>{D===a&&(x=!0)})),M=!0,A(E,e,d.state.value[_])}const B=u?function(){const{state:t}=l,e=t?t():{};this.$patch((t=>{w(t,e)}))}:O;function R(t,e){return function(){f(d);const a=Array.from(arguments),p=[],n=[];let o;A(I,{args:a,name:t,store:F,after:function(t){p.push(t)},onError:function(t){n.push(t)}});try{o=e.apply(this&&this.$id===_?this:F,a)}catch(t){throw A(n,t),t}return o instanceof Promise?o.then((t=>(A(p,t),t))).catch((t=>(A(n,t),Promise.reject(t)))):(A(p,o),o)}}const V=p({actions:{},getters:{},state:[],hotState:T}),z={_p:d,$id:_,$onAction:L.bind(null,I),$patch:q,$reset:B,$subscribe(t,a={}){const p=L(E,t,a.detached,(()=>n())),n=g.run((()=>e((()=>d.state.value[_]),(e=>{("sync"===a.flush?M:x)&&t({storeId:_,type:b.direct,events:j},e)}),w({},v,a))));return p},$dispose:function(){g.stop(),E=[],I=[],d._s.delete(_)}},F=a(C?w({_hmrPayload:V,_customProperties:p(new Set)},z):z);d._s.set(_,F);const N=(d._a&&d._a.runWithContext||P)((()=>d._e.run((()=>(g=n()).run(i)))));for(const t in N){const e=N[t];if(o(e)&&(!o(G=e)||!G.effect)||r(e))u||(!k||h(U=e)&&U.hasOwnProperty(S)||(o(e)?e.value=k[t]:$(e,k[t])),d.state.value[_][t]=e);else if("function"==typeof e){const a=R(t,e);N[t]=a,m.actions[t]=e}}var U,G;if(w(F,N),w(c(F),N),Object.defineProperty(F,"$state",{get:()=>d.state.value[_],set:t=>{q((e=>{w(e,t)}))}}),C){const t={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach((e=>{Object.defineProperty(F,e,w({value:F[e]},t))}))}return d._p.forEach((t=>{if(C){const e=g.run((()=>t({store:F,app:d._a,pinia:d,options:m})));Object.keys(e||{}).forEach((t=>F._customProperties.add(t))),w(F,e)}else w(F,g.run((()=>t({store:F,app:d._a,pinia:d,options:m}))))})),k&&u&&l.hydrate&&l.hydrate(F.$state,k),x=!0,M=!0,F}function M(t,e){return Array.isArray(e)?e.reduce(((e,a)=>(e[a]=function(){return t(this.$pinia)[a]},e)),{}):Object.keys(e).reduce(((a,p)=>(a[p]=function(){const a=t(this.$pinia),n=e[p];return"function"==typeof n?n.call(this,a):a[n]},a)),{})}function j(t,e){return Array.isArray(e)?e.reduce(((e,a)=>(e[a]=function(...e){return t(this.$pinia)[a](...e)},e)),{}):Object.keys(e).reduce(((a,p)=>(a[p]=function(...a){return t(this.$pinia)[e[p]](...a)},a)),{})}var E=function(t,e,a){let n,o;const r="function"==typeof e;function c(t,a){const c=u();(t=t||(c?_(m,null):null))&&f(t),(t=g)._s.has(n)||(r?x(n,e,o,t):function(t,e,a){const{state:n,actions:o,getters:r}=e,c=a.state.value[t];let s;s=x(t,(function(){c||(a.state.value[t]=n?n():{});const e=d(a.state.value[t]);return w(e,o,Object.keys(r||{}).reduce(((e,n)=>(e[n]=p(y((()=>{f(a);const e=a._s.get(t);return r[n].call(e,e)}))),e)),{}))}),e,a,0,!0)}(n,o,t));return t._s.get(n)}return"string"==typeof t?(n=t,o=r?a:e):(o=t,n=t.id),c.$id=n,c}("ppcpStore",{state:()=>({cache:{},environment:"sandbox",isPPCPenabled:!1,sandboxClientId:"",productionClientId:"",buyerCountry:"",errorMessage:null,apple:{merchantName:"",enabled:!1,paymentAction:"",sortOrder:null,title:""},venmo:{vaultActive:!1,enabled:!1,paymentAction:"",sortOrder:null,title:""},apm:{enabled:!1,title:"",sortOrder:null,allowedPayments:[]},google:{buttonColor:"white",enabled:!1,paymentAction:"",sortOrder:null,title:""},paypal:{enabled:!1,vaultActive:!1,title:"",paymentAction:"",requireBillingAddress:!1,sortOrder:null,buttonLabel:"",buttonColor:"gold",buttonShape:"",payLaterActive:!1,payLaterButtonColour:"black",payLaterButtonShape:"",payLaterMessageActive:!1,payLaterMessageLayout:"",payLaterMessageLogoType:"",payLaterMessageLogoPosition:"",payLaterMessageColour:"",payLaterMessageTextSize:"",payLaterMessageTextAlign:""},card:{enabled:!1,vaultActive:!1,title:"",paymentAction:"",threeDSecureStatus:"",sortOrder:null}}),actions:{setData(t){this.$patch(t)},async getInitialConfigValues(){const t=await window.geneCheckout.helpers.loadFromCheckout(["services.graphQlRequest"]);await this.getCachedResponse((async()=>t("{\n        storeConfig {\n          ppcp_environment\n          ppcp_active\n          ppcp_sandbox_client_id\n          ppcp_client_id_production\n          ppcp_buyer_country\n          \n          ppcp_googlepay_active\n          ppcp_googlepay_title\n          ppcp_googlepay_payment_action\n          ppcp_googlepay_button_colour\n          ppcp_googlepay_sort_order\n          \n          ppcp_applepay_active\n          ppcp_applepay_title\n          ppcp_applepay_payment_action\n          ppcp_applepay_merchant_name\n          ppcp_applepay_sort_order\n    \n          ppcp_paypal_active\n          ppcp_paypal_vault_active\n          ppcp_paypal_title\n          ppcp_paypal_payment_action\n          ppcp_paypal_require_billing_address\n          ppcp_paypal_sort_order\n          ppcp_paypal_button_paypal_label\n          ppcp_paypal_button_paypal_color\n          ppcp_paypal_button_paypal_shape\n          ppcp_paypal_paylater_enable_paylater\n          ppcp_paypal_paylater_button_paylater_color\n          ppcp_paypal_paylater_button_paylater_shape\n          ppcp_paypal_paylater_message_enable\n          ppcp_paypal_paylater_message_layout\n          ppcp_paypal_paylater_message_logo_type\n          ppcp_paypal_paylater_message_logo_position\n          ppcp_paypal_paylater_message_text_color\n          ppcp_paypal_paylater_message_text_size\n          ppcp_paypal_paylater_message_text_align\n\n          ppcp_venmo_active\n          ppcp_venmo_title\n          ppcp_venmo_payment_action\n          ppcp_venmo_vault_active\n          ppcp_venmo_sort_order\n          \n          ppcp_apm_active\n          ppcp_apm_title\n          ppcp_apm_allowed_methods\n          ppcp_apm_sort_order\n          \n          ppcp_card_active\n          ppcp_card_vault_active\n          ppcp_card_title\n          ppcp_card_payment_action\n          ppcp_card_three_d_secure\n          ppcp_card_sort_order\n        }\n      }").then(this.handleInitialConfig)),"getInitialConfig")},async handleInitialConfig(t){t?.data?.storeConfig&&this.setData({environment:t.data.storeConfig.ppcp_environment,isPPCPenabled:t.data.storeConfig.ppcp_active,sandboxClientId:t.data.storeConfig.ppcp_sandbox_client_id,productionClientId:t.data.storeConfig.ppcp_client_id_production,buyerCountry:t.data.storeConfig.ppcp_buyer_country,card:{enabled:t.data.storeConfig.ppcp_card_active,vaultActive:t.data.storeConfig.ppcp_card_vault_active,title:t.data.storeConfig.ppcp_card_title,paymentAction:t.data.storeConfig.ppcp_card_payment_action,threeDSecureStatus:t.data.storeConfig.ppcp_card_three_d_secure,sortOrder:t.data.storeConfig.ppcp_card_sort_order},google:{buttonColor:t.data.storeConfig.ppcp_googlepay_button_colour,enabled:t.data.storeConfig.ppcp_googlepay_active,paymentAction:t.data.storeConfig.ppcp_googlepay_payment_action,sortOrder:t.data.storeConfig.ppcp_googlepay_sort_order,title:t.data.storeConfig.ppcp_googlepay_title},apple:{merchantName:t.data.storeConfig.ppcp_applepay_merchant_name,enabled:t.data.storeConfig.ppcp_applepay_active,paymentAction:t.data.storeConfig.ppcp_applepay_payment_action,sortOrder:t.data.storeConfig.ppcp_applepay_sort_order,title:t.data.storeConfig.ppcp_applepay_title},venmo:{vaultActive:t.data.storeConfig.ppcp_venmo_payment_action,enabled:t.data.storeConfig.ppcp_venmo_active,paymentAction:t.data.storeConfig.ppcp_venmo_payment_action,sortOrder:t.data.storeConfig.ppcp_venmo_sort_order,title:t.data.storeConfig.ppcp_venmo_title},apm:{enabled:t.data.storeConfig.ppcp_apm_active,title:t.data.storeConfig.ppcp_apm_title,sortOrder:t.data.storeConfig.ppcp_apm_sort_order,allowedPayments:t.data.storeConfig.ppcp_apm_allowed_methods},paypal:{enabled:t.data.storeConfig.ppcp_paypal_active,vaultActive:t.data.storeConfig.ppcp_paypal_vault_active,title:t.data.storeConfig.ppcp_paypal_title,paymentAction:t.data.storeConfig.ppcp_paypal_payment_action,requireBillingAddress:t.data.storeConfig.ppcp_paypal_require_billing_address,sortOrder:t.data.storeConfig.ppcp_paypal_sort_order,buttonLabel:t.data.storeConfig.ppcp_paypal_button_paypal_label,buttonColor:t.data.storeConfig.ppcp_paypal_button_paypal_color,buttonShape:t.data.storeConfig.ppcp_paypal_button_paypal_shape,payLaterActive:t.data.storeConfig.ppcp_paypal_paylater_enable_paylater,payLaterButtonColour:t.data.storeConfig.ppcp_paypal_paylater_button_paylater_color,payLaterButtonShape:t.data.storeConfig.ppcp_paypal_paylater_button_paylater_shape,payLaterMessageActive:t.data.storeConfig.ppcp_paypal_paylater_message_enable,payLaterMessageLayout:t.data.storeConfig.ppcp_paypal_paylater_message_layout,payLaterMessageLogoType:t.data.storeConfig.ppcp_paypal_paylater_message_logo_type,payLaterMessageLogoPosition:t.data.storeConfig.ppcp_paypal_paylater_message_logo_position,payLaterMessageColour:t.data.storeConfig.ppcp_paypal_paylater_message_text_color,payLaterMessageTextSize:t.data.storeConfig.ppcp_paypal_paylater_message_text_size,payLaterMessageTextAlign:t.data.storeConfig.ppcp_paypal_paylater_message_text_align}})},getCachedResponse(t,e,a={}){if(void 0!==this.$state.cache[e])return this.$state.cache[e];const p=t(a);return this.$patch({cache:{[e]:p}}),p},clearCache(t){t&&this.setData({cache:{[t]:void 0}})}}});function I(){const t=new Map;return async function(e,a,p="paypal",n="checkout",o=""){if(a){const t=new URLSearchParams(a).toString();e=`${e}?${t}`}const r=((t,e,a="")=>`${t}${e}${a}`)(e,p,o);if(t.has(r))return t.get(r);const c=new Promise(((a,c)=>{const s=document.createElement("script");s.src=e,s.dataset.namespace=`paypal_${p}`,s.dataset.partnerAttributionId="GENE_PPCP",s.dataset.pageType=n,o&&(s.dataset.userIdToken=o),s.onload=()=>{const t=new CustomEvent("ppcpScriptLoaded",{detail:p});document.dispatchEvent(t),a()},s.onerror=()=>{t.delete(r),c(new Error(`Failed to load script: ${e}`))},document.head.appendChild(s)}));return t.set(r,c),c}}export{j as a,I as l,M as m,E as u};

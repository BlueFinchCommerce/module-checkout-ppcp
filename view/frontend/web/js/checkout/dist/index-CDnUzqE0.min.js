function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const n={};var t={create:(e,t,o,r,a)=>{let i=e;t&&(i=new URL(i),i.search=new URLSearchParams(t),i=decodeURIComponent(i.href));const c=((e,n,t="")=>e+n+t)(i,o,a);return n[c]||(n[c]=new Promise((e=>{const n=document.createElement("script");n.src=i,n.dataset.namespace=`paypal_${o}`,n.dataset.partnerAttributionId="GENE_PPCP",n.dataset.pageType=r||"checkout",a&&(n.dataset.userIdToken=a),n.onload=()=>{const n=new CustomEvent("ppcpScriptLoaded",{detail:o});document.dispatchEvent(n),e()},document.head.appendChild(n)}))),n[c]}};const o=t,r="ppcp_applepay_new";let a,i,c;function l(){return new Promise((e=>{const n=document.createElement("apple-pay-button");n.onclick=()=>{!function(){const e=new window.ApplePaySession(4,c),n=window[`paypal_${r}`].Applepay();e.onvalidatemerchant=t=>{n.validateMerchant({validationUrl:t.validationURL}).then((n=>{e.completeMerchantValidation(n.merchantSession)})).catch((n=>{console.error(n),e.abort()}))},e.onshippingcontactselected=n=>{a.onShippingContactSelect(n,e)},e.onshippingmethodselected=n=>{a.onShippingMethodSelect(n,e)},e.onpaymentauthorized=async t=>{a.onPaymentAuthorized(t,e,n)},e.begin()}()};document.getElementById(i).appendChild(n),e()}))}var s=function(e,n){if(!e||!n)throw new Error("Apple Pay requires both context and element.");a=e,i=n;const t={"client-id":a.productionClientId,intent:a.intent,components:"applepay",currency:a.currency};"sandbox"===a.environment&&(t["client-id"]=a.sandboxClientId,t["buyer-country"]=a.buyerCountry),o.create("https://www.paypal.com/sdk/js",t,r,a.pageType).then((()=>new Promise(((e,n)=>"https:"!==window.location.protocol?(console.warn("PPCP Apple Pay requires your checkout be served over HTTPS"),void n()):!0!==(window.ApplePaySession&&window.ApplePaySession.canMakePayments())?(console.warn("PPCP Apple Pay is not supported on this device/browser"),void n()):void window[`paypal_${r}`].Applepay().config().then((e=>(e.isEligible||(console.warn("PPCP Apple Pay is not eligible"),n()),a.getPaymentRequest(e)))).then((n=>{c=n,e()})).catch((()=>{console.error("Error while fetching Apple Pay configuration."),n()})))))).then((()=>l()))};const p=s,d=t;const u=t,y="ppcp_card_new";let h;function m(){if(window[`paypal_${y}`]){!function(e){const n=h.cardFields.numberField,t=h.cardFields.cvvField,o=h.cardFields.expiryField;if(e.isEligible()){const r=document.querySelector(n.id),a=document.querySelector(t.id),i=document.querySelector(o.id),c=e.NumberField({placeholder:n.placeholder,inputEvents:{onBlur:e=>n.inputEvents.blur(e,r),onFocus:()=>{}}}),l=e.CVVField({placeholder:t.placeholder,inputEvents:{onBlur:e=>t.inputEvents.blur(e,a),onFocus:()=>{}}}),s=e.ExpiryField({placeholder:o.placeholder,inputEvents:{onBlur:e=>o.inputEvents.blur(e,i),onFocus:()=>{}}});""===r.innerHTML.trim()&&c.render(n.id),""===a.innerHTML.trim()&&l.render(t.id),""===i.innerHTML.trim()&&s.render(o.id),document.querySelector(h.submitButtonId).addEventListener("click",(()=>{h.runAdditionalValidators()&&e.getState().then((n=>{if(n.isFormValid)e.submit().then((()=>{})).catch((e=>{console.error(e),h.displayErrorMessage("Cannot validate payment.")}));else{let e="";n.errors.includes("INVALID_NUMBER")&&(e+="Card number is not valid."),n.errors.includes("INVALID_EXPIRY")&&(e+=" Expiry date is not valid."),n.errors.includes("INVALID_CVV")&&(e+=" CVV is not valid."),h.displayErrorMessage(e)}}))}))}}(window[`paypal_${y}`].CardFields({createOrder:()=>h.createOrder(),onApprove:()=>h.onApprove(),onError:()=>h.onError(),style:h.style}))}else h.active(!1)}var w=function(e,n){if(!e||!n)throw new Error("Card Payments requires both context and element.");h=e;const t={"client-id":h.clientId,intent:h.intent,components:"card-fields",currency:h.currency};u.create("https://www.paypal.com/sdk/js",t,y,h.pageType).then((()=>m()))};const g=t;let P,b,f;function E(e){P.onValidate().then((n=>{if(!n)return!1;const t={...e},o=["PAYMENT_AUTHORIZATION"],r=P.onPaymentDataChanged;r&&o.push("SHIPPING_ADDRESS","SHIPPING_OPTION"),t.allowedPaymentMethods=e.allowedPaymentMethods,t.transactionInfo={countryCode:e.countryCode,currencyCode:P.transactionInfo.currencyCode,totalPriceStatus:P.transactionInfo.totalPriceStatus,totalPrice:P.transactionInfo.totalPrice},t.merchantInfo=e.merchantInfo,t.shippingAddressRequired=!!r,t.shippingAddressParameters={phoneNumberRequired:!!r},t.emailRequired=!0,t.shippingOptionRequired=!!r,t.callbackIntents=o,delete t.countryCode,delete t.isEligible,b.loadPaymentData(t).catch((e=>{"CANCELED"===e.statusCode||"AbortError"===e.name?(console.warn("User canceled the Google Pay payment UI"),P.onCancel&&P.onCancel()):(console.error("Google Pay Error:",e),P.onError&&P.onError(e))}))})).catch((e=>{console.error("Validation error:",e)}))}var C=function(e,n){if(!e||!n)throw new Error("Google Payments requires both context and element.");if("function"!=typeof e.placeOrder)return console.error("PPCP Google Pay Context passed does not provide a placeOrder method",e);P=e;const t={"client-id":P.productionClientId,intent:P.intent,components:"googlepay",currency:P.transactionInfo.currencyCode};"sandbox"===P.environment&&(t["client-id"]=P.sandboxClientId,t["buyer-country"]=P.buyerCountry),g.create("https://www.paypal.com/sdk/js",t,"ppcp_googlepay",P.pageType).then((()=>new Promise(((e,n)=>{if("https:"!==window.location.protocol)return console.warn("Google Pay requires your checkout be served over HTTPS"),void n(new Error("Insecure protocol: HTTPS is required for Google Pay"));f=window.paypal_ppcp_googlepay.Googlepay(),f.config().then((t=>{t.isEligible?(t.allowedPaymentMethods.forEach((e=>{e.parameters.billingAddressParameters.phoneNumberRequired=!0})),e(t)):n(new Error("Device not eligible for Google Pay"))})).catch((e=>{n(e)}))})))).then((e=>function(e){const n={onPaymentAuthorized:e=>P.onPaymentAuthorized(e,f)};return P.onPaymentDataChanged&&(n.onPaymentDataChanged=n=>P.onPaymentDataChanged(n,e)),b=new window.google.payments.api.PaymentsClient({environment:"sandbox"===P.environment?"TEST":"PRODUCTION",paymentDataCallbacks:n}),b.isReadyToPay({apiVersion:e.apiVersion,apiVersionMinor:e.apiVersionMinor,allowedPaymentMethods:e.allowedPaymentMethods}).then((n=>n.result?e:null))}(e))).then((e=>function(e){return b.createButton({allowedPaymentMethods:e.allowedPaymentMethods,buttonColor:P.button.buttonColor.toLowerCase(),buttonSizeMode:"fill",onClick:P.beforeOnClick?()=>P.beforeOnClick().then((()=>E(e))):()=>E(e)})}(e))).then((e=>{if(e){document.getElementById(n).appendChild(e)}})).catch((e=>{console.error("Error initializing Google Pay Button:",e)}))};const v=C,I=t;const A=t,S="ppcp_paypal_new";let _,T,M;const k={};function N(){return new Promise((e=>{M.forEach((e=>{const n={createOrder:_.createOrder,onApprove:_.onApprove,onClick:_.onClick,onCancel:_.onCancel,onError:e=>_.onError(e),onShippingAddressChange:e=>_.onShippingAddressChange(e),onShippingOptionsChange:e=>_.onShippingOptionsChange(e)};n.fundingSource=e,n.style=function(e){const{[e]:{buttonColor:n,buttonLabel:t,buttonShape:o}}=_.buttonStyles||{};return{color:n,label:t,shape:o,height:_.buttonHeight?_.buttonHeight:40}}(e),n.message=function(e){if("paylater"===e&&_.isPayLaterMessagingEnabled&&"checkout"===_.pageType){const e=_.messageStyles.text||{};return{align:e.align,amount:_.amount,color:"black"!==e.color||"white"!==e.color?"black":e.color}}return null}(e),k[e]=window[`paypal_${S}`].Buttons(n)})),e()}))}var O=function(e,n){if(!e||!n)throw new Error("PaypalButtons requires both context and element.");_=e,T=n;const t={"client-id":_.productionClientId,intent:_.intent,components:"buttons",currency:_.currency};"sandbox"===_.environment&&(t["client-id"]=_.sandboxClientId,t["buyer-country"]=_.buyerCountry),_.isPayLaterMessagingEnabled&&(t.components+=",messages"),_.isPayLaterEnabled&&(t["enable-funding"]="paylater"),A.create("https://www.paypal.com/sdk/js",t,S,_.pageType).then((()=>new Promise((e=>{const n=[window[`paypal_${S}`].FUNDING.PAYPAL];_.isPayLaterEnabled&&n.push(window[`paypal_${S}`].FUNDING.PAYLATER),M=n.filter((e=>{const n=`${T}-${e}`;return document.getElementById(n)?document.getElementById(n):(console.error("Paypal button element does not exist",n),null)})),e()})))).then((()=>N())).then((()=>{Object.keys(k).forEach((e=>{const n=document.getElementById(`${T}-${e}`),t=0===n.childNodes.length;k[e].isEligible()&&n&&t&&k[e].render(n)}))})).catch((e=>{console.error("Error initializing PayPal Buttons:",e)}))};const x=O;const V=t,B="ppcp_paypal_messages";let L,q;const D={components:"messages"};function F(){if(window[`paypal_${B}`].Messages){const e=window[`paypal_${B}`].Messages(L.messageConfig),n=document.getElementById(q);e.render(n)}else V.create("https://www.paypal.com/sdk/js",D,B,L.pageType).then((()=>F()))}const R=function(e,n){if(!e||!n)throw new Error("PaypalElements requires both context and element.");L=e,q=n,D["client-id"]=L.clientId,F()};const $=t,G="ppcp_paypal_venmo";let U,j,H;var z=function(e,n){if(!e||!n)throw new Error("Venmo button requires both context and element.");U=e,j=n;const t={"client-id":U.clientId,intent:U.intent,components:"buttons",currency:U.currency,"enable-funding":"venmo"};"sandbox"===U.environment&&(t["buyer-country"]=U.buyerCountry),$.create("https://www.paypal.com/sdk/js",t,G,U.pageType).then((()=>new Promise((e=>{const n=window[`paypal_${G}`].FUNDING.VENMO,t={createOrder:U.createOrder,onApprove:U.onApprove,onClick:U.onClick,onError:U.onError,fundingSource:n};H=window[`paypal_${G}`].Buttons(t),e()})))).then((()=>{const e=document.getElementById(j),n=0===e.childNodes.length;H.isEligible()&&e&&n&&H.render(e)})).catch((e=>{console.error("Error initializing Venmo Button:",e)}))};const Y=z;var X=e({applePayment:function(e,n){return d.create("https://applepay.cdn-apple.com/jsapi/v1.1.0/apple-pay-sdk.js",{},"",e.pageType),new p(e,n)},cardPayment:w,googlePayment:function(e,n){return I.create("https://pay.google.com/gp/p/js/pay.js",{},"ppcp_pay",e.pageType),new v(e,n)},paypalButtons:function(e,n){return new x(e,n)},paypalMessages:function(e,n){return new R(e,n)},venmoPayment:function(e,n){return new Y(e,n)}});export{X as p};

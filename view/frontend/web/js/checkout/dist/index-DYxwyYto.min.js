function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const n={};var t={create:(e,t,o,r,a)=>{let i=e;t&&(i=new URL(i),i.search=new URLSearchParams(t),i=decodeURIComponent(i.href));const c=((e,n,t="")=>e+n+t)(i,o,a);return n[c]||(n[c]=new Promise((e=>{const n=document.createElement("script");n.src=i,n.dataset.namespace=`paypal_${o}`,n.dataset.partnerAttributionId="GENE_PPCP",n.dataset.pageType=r||"checkout",a&&(n.dataset.userIdToken=a),n.onload=()=>{const n=new CustomEvent("ppcpScriptLoaded",{detail:o});document.dispatchEvent(n),e()},document.head.appendChild(n)}))),n[c]}};const o=t,r="ppcp_applepay_new";let a,i,c;function l(){const e=new window.ApplePaySession(4,c),n=window[`paypal_${r}`].Applepay();e.onvalidatemerchant=t=>{n.validateMerchant({validationUrl:t.validationURL}).then((n=>{e.completeMerchantValidation(n.merchantSession)})).catch((n=>{console.error(n),a.onClose(),e.abort()}))},e.onshippingcontactselected=n=>{a.onShippingContactSelect(n,e)},e.onshippingmethodselected=n=>{a.onShippingMethodSelect(n,e)},e.onpaymentauthorized=async t=>{a.onPaymentAuthorized(t,e,n)},e.oncancel=()=>{a.onClose()},a.onValidate().then((n=>{n?e.begin():e.abort()})).catch((n=>{console.error("Validation error:",n),e.abort()}))}var s=function(e,n){if(!e||!n)throw new Error("Apple Pay requires both context and element.");a=e,i=n;const t={"client-id":a.productionClientId,intent:a.intent,components:"applepay",currency:a.currency};"sandbox"===a.environment&&(t["client-id"]=a.sandboxClientId,t["buyer-country"]=a.buyerCountry),o.create("https://www.paypal.com/sdk/js",t,r,a.pageType).then((()=>new Promise(((e,n)=>"https:"!==window.location.protocol?(console.warn("PPCP Apple Pay requires your checkout be served over HTTPS"),void n(new Error("Apple Pay requires HTTPS."))):!0!==(window.ApplePaySession&&window.ApplePaySession.canMakePayments())?(console.warn("PPCP Apple Pay is not supported on this device/browser"),void n(new Error("Apple Pay is not supported on this device/browser."))):void window[`paypal_${r}`].Applepay().config().then((e=>e.isEligible?a.getPaymentRequest(e):(console.warn("PPCP Apple Pay is not eligible"),void n(new Error("Apple Pay is not eligible."))))).then((n=>{c=n,e()})).catch((e=>{console.error("Error while fetching Apple Pay configuration:",e),n(new Error("Error fetching Apple Pay configuration.")),a.onClose()})))))).then((()=>new Promise((e=>{const n=document.createElement("apple-pay-button");n.onclick=l,document.getElementById(i).appendChild(n),e()}))))};const p=s,d=t;const u=t,y="ppcp_card_new";let h,m;function w(){if(window[`paypal_${y}`]){!function(e){const n=h.cardFields.numberField,t=h.cardFields.cvvField,o=h.cardFields.expiryField;if(e.isEligible()){const r=document.querySelector(n.id),a=document.querySelector(t.id),i=document.querySelector(o.id),c=e.NumberField({placeholder:n.placeholder,inputEvents:{onBlur:e=>n.inputEvents.blur(e,r),onFocus:()=>{}}}),l=e.CVVField({placeholder:t.placeholder,inputEvents:{onBlur:e=>t.inputEvents.blur(e,a),onFocus:()=>{}}}),s=e.ExpiryField({placeholder:o.placeholder,inputEvents:{onBlur:e=>o.inputEvents.blur(e,i),onFocus:()=>{}}});""===r.innerHTML.trim()&&c.render(n.id),""===a.innerHTML.trim()&&l.render(t.id),""===i.innerHTML.trim()&&s.render(o.id),document.querySelector(m).addEventListener("click",(async()=>{try{const n=await h.onValidate(),t=await e.getState();if(t.isFormValid&&n)try{await e.submit()}catch(e){console.error(e),h.handleErrors("Cannot validate payment.")}else h.handleErrors(t.errors)}catch(e){console.error("Validation error:",e)}}))}}(window[`paypal_${y}`].CardFields({createOrder:()=>h.createOrder(),onApprove:()=>h.onApprove(),style:h.style}))}else h.active(!1)}var g=function(e,n){if(!e||!n)throw new Error("Card Payments requires both context and element.");h=e,m=n;const t={"client-id":h.productionClientId,intent:h.intent,components:"card-fields",currency:h.currency};"sandbox"===h.environment&&(t["client-id"]=h.sandboxClientId,t["buyer-country"]=h.buyerCountry),u.create("https://www.paypal.com/sdk/js",t,y,h.pageType).then((()=>w()))};const P=t;let b,C,f;function E(e){b.onValidate().then((n=>{if(!n)return!1;const t={...e},o=["PAYMENT_AUTHORIZATION"],r=b.onPaymentDataChanged;r&&o.push("SHIPPING_ADDRESS","SHIPPING_OPTION"),t.allowedPaymentMethods=e.allowedPaymentMethods,t.transactionInfo={countryCode:e.countryCode,currencyCode:b.transactionInfo.currencyCode,totalPriceStatus:b.transactionInfo.totalPriceStatus,totalPrice:b.transactionInfo.totalPrice},t.merchantInfo=e.merchantInfo,t.shippingAddressRequired=!!r,t.shippingAddressParameters={phoneNumberRequired:!!r},t.emailRequired=!0,t.shippingOptionRequired=!!r,t.callbackIntents=o,delete t.countryCode,delete t.isEligible,C.loadPaymentData(t).catch((e=>{"CANCELED"===e.statusCode||"AbortError"===e.name?(console.warn("User canceled the Google Pay payment UI"),b.onCancel&&b.onCancel()):(console.error("Google Pay Error:",e),b.onError&&b.onError(e))}))})).catch((e=>{console.error("Validation error:",e)}))}var v=function(e,n){if(!e||!n)throw new Error("Google Payments requires both context and element.");if("function"!=typeof e.placeOrder)return console.error("PPCP Google Pay Context passed does not provide a placeOrder method",e);b=e;const t={"client-id":b.productionClientId,intent:b.intent,components:"googlepay",currency:b.transactionInfo.currencyCode};"sandbox"===b.environment&&(t["client-id"]=b.sandboxClientId,t["buyer-country"]=b.buyerCountry),P.create("https://www.paypal.com/sdk/js",t,"ppcp_googlepay",b.pageType).then((()=>new Promise(((e,n)=>{if("https:"!==window.location.protocol)return console.warn("Google Pay requires your checkout be served over HTTPS"),void n(new Error("Insecure protocol: HTTPS is required for Google Pay"));f=window.paypal_ppcp_googlepay.Googlepay(),f.config().then((t=>{t.isEligible?(t.allowedPaymentMethods.forEach((e=>{e.parameters.billingAddressParameters.phoneNumberRequired=!0})),e(t)):n(new Error("Device not eligible for Google Pay"))})).catch((e=>{n(e)}))})))).then((e=>function(e){const n={onPaymentAuthorized:e=>b.onPaymentAuthorized(e,f)};return b.onPaymentDataChanged&&(n.onPaymentDataChanged=n=>b.onPaymentDataChanged(n,e)),C=new window.google.payments.api.PaymentsClient({environment:"sandbox"===b.environment?"TEST":"PRODUCTION",paymentDataCallbacks:n}),C.isReadyToPay({apiVersion:e.apiVersion,apiVersionMinor:e.apiVersionMinor,allowedPaymentMethods:e.allowedPaymentMethods}).then((n=>n.result?e:null))}(e))).then((e=>function(e){return C.createButton({allowedPaymentMethods:e.allowedPaymentMethods,buttonColor:b.button.buttonColor.toLowerCase(),buttonSizeMode:"fill",onClick:b.beforeOnClick?()=>b.beforeOnClick().then((()=>E(e))):()=>E(e)})}(e))).then((e=>{if(e){document.getElementById(n).appendChild(e)}})).catch((e=>{console.error("Error initializing Google Pay Button:",e)}))};const I=v,A=t;const S=t,_="ppcp_paypal_new";let T,k,M;const x={};function O(){return new Promise((e=>{M.forEach((e=>{const n={createOrder:T.createOrder,onApprove:T.onApprove,onClick:T.onClick,onCancel:T.onCancel,onError:e=>T.onError(e),onShippingAddressChange:e=>T.onShippingAddressChange(e),onShippingOptionsChange:e=>T.onShippingOptionsChange(e)};n.fundingSource=e,n.style=function(e){const{[e]:{buttonColor:n,buttonLabel:t,buttonShape:o}}=T.buttonStyles||{};return{color:n,label:t,shape:o,height:T.buttonHeight?T.buttonHeight:40}}(e),n.message=function(e){if("paylater"===e&&T.isPayLaterMessagingEnabled&&"checkout"===T.pageType){const e=T.messageStyles.text||{};return{align:e.align,amount:T.amount,color:"black"!==e.color||"white"!==e.color?"black":e.color}}return null}(e),x[e]=window[`paypal_${_}`].Buttons(n)})),e()}))}var q=function(e,n){if(!e||!n)throw new Error("PaypalButtons requires both context and element.");T=e,k=n;const t={"client-id":T.productionClientId,intent:T.intent,components:"buttons",currency:T.currency};"sandbox"===T.environment&&(t["client-id"]=T.sandboxClientId,t["buyer-country"]=T.buyerCountry),T.isPayLaterMessagingEnabled&&(t.components+=",messages"),T.isPayLaterEnabled&&(t["enable-funding"]="paylater"),S.create("https://www.paypal.com/sdk/js",t,_,T.pageType).then((()=>new Promise((e=>{const n=[window[`paypal_${_}`].FUNDING.PAYPAL];T.isPayLaterEnabled&&n.push(window[`paypal_${_}`].FUNDING.PAYLATER),M=n.filter((e=>{const n=`${k}-${e}`;return document.getElementById(n)?document.getElementById(n):(console.error("Paypal button element does not exist",n),null)})),e()})))).then((()=>O())).then((()=>{Object.keys(x).forEach((e=>{const n=document.getElementById(`${k}-${e}`),t=0===n.childNodes.length;x[e].isEligible()&&n&&t&&x[e].render(n)}))})).catch((e=>{console.error("Error initializing PayPal Buttons:",e)}))};const N=q;const B=t,L="ppcp_paypal_messages";let F,V;const $={components:"messages"};function G(){if(window[`paypal_${L}`].Messages){const e=window[`paypal_${L}`].Messages(F.messageConfig),n=document.getElementById(V);e.render(n)}else B.create("https://www.paypal.com/sdk/js",$,L,F.pageType).then((()=>G()))}const R=function(e,n){if(!e||!n)throw new Error("PaypalElements requires both context and element.");F=e,V=n,$["client-id"]=F.clientId,G()};const D=t,H="ppcp_paypal_venmo";let j,U,z;function Y(){return new Promise((e=>{const n=window[`paypal_${H}`].FUNDING.VENMO,t={createOrder:j.createOrder,onApprove:j.onApprove,onClick:j.onClick,onError:j.onError,onCancel:j.onCancel,fundingSource:n};t.style=function(){const e=j.buttonStyles;return{color:"gold"===e.buttonColor?"blue":e.buttonColor,label:e.buttonLabel,shape:e.buttonShape,height:j.buttonHeight?j.buttonHeight:40}}(),z=window[`paypal_${H}`].Buttons(t),e()}))}var Z=function(e,n){if(!e||!n)throw new Error("Venmo button requires both context and element.");j=e,U=n;const t={"client-id":j.productionClientId,intent:j.intent,components:"buttons",currency:j.currency,"enable-funding":"venmo"};"sandbox"===j.environment&&(t["client-id"]=j.sandboxClientId,t["buyer-country"]=j.buyerCountry),D.create("https://www.paypal.com/sdk/js",t,H,j.pageType).then((()=>Y())).then((()=>{const e=document.getElementById(U),n=0===e.childNodes.length;z.isEligible()&&e&&n&&z.render(e)})).catch((e=>{console.error("Error initializing Venmo Button:",e)}))};const J=Z;var K=e({applePayment:function(e,n){return d.create("https://applepay.cdn-apple.com/jsapi/v1.1.0/apple-pay-sdk.js",{},"",e.pageType),new p(e,n)},cardPayment:g,googlePayment:function(e,n){return A.create("https://pay.google.com/gp/p/js/pay.js",{},"ppcp_pay",e.pageType),new I(e,n)},paypalButtons:function(e,n){return new N(e,n)},paypalMessages:function(e,n){return new R(e,n)},venmoPayment:function(e,n){return new J(e,n)}});export{K as p};

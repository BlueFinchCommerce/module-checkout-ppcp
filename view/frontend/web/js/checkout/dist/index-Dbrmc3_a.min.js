function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const n={};var t={create:(e,t,o,r,a)=>{let i=e;t&&(i=new URL(i),i.search=new URLSearchParams(t),i=decodeURIComponent(i.href));const c=((e,n,t="")=>e+n+t)(i,o,a);return n[c]||(n[c]=new Promise((e=>{const n=document.createElement("script");n.src=i,n.dataset.namespace=`paypal_${o}`,n.dataset.partnerAttributionId="GENE_PPCP",n.dataset.pageType=r||"checkout",a&&(n.dataset.userIdToken=a),n.onload=()=>{const n=new CustomEvent("ppcpScriptLoaded",{detail:o});document.dispatchEvent(n),e()},document.head.appendChild(n)}))),n[c]}};const o=t,r="ppcp_apm_payments";let a,i,c,l,s=!1;function p(e){const n=window[`paypal_${r}`].FUNDING[e.toUpperCase()];i=window[`paypal_${r}`].Marks({fundingSource:n}),c=window[`paypal_${r}`].PaymentFields({fundingSource:n}),l=window[`paypal_${r}`].Buttons({fundingSource:n,createOrder:a.createOrder,onApprove:a.onApprove,onClick:a.onClick,onError:a.onError,onCancel:a.onCancel}),function(e){const n=document.getElementById(`paypal_${e}_mark`),t=0===n.childNodes.length;i.isEligible()&&n&&t&&i.render(n)}(e),function(e){const n=document.getElementById(`paypal_${e}_fields`),t=0===n.childNodes.length;c.isEligible()&&n&&t&&c.render(n)}(e),function(e){const n=document.getElementById(`paypal_${e}_button`),t=0===n.childNodes.length;l.isEligible()&&n&&t&&l.render(n)}(e)}var d=function(e,n){if(!e||!n)throw new Error("APM payments requires both context and element.");a=e;const t={"client-id":a.productionClientId,intent:"capture",components:"buttons,marks,funding-eligibility,payment-fields",currency:a.currency};"sandbox"===a.environment&&(t["client-id"]=a.sandboxClientId,t["buyer-country"]=a.buyerCountry),s||o.create("https://www.paypal.com/sdk/js",t,r,a.pageType).catch((e=>{console.error("Error initializing APM Payments:",e)})),document.addEventListener("ppcpScriptLoaded",(e=>{e.detail===r&&p(n)})),s=!0};const u=d;const y=t,h="ppcp_applepay_new";let m,w,g;function b(){const e=new window.ApplePaySession(4,g),n=window[`paypal_${h}`].Applepay();e.onvalidatemerchant=t=>{n.validateMerchant({validationUrl:t.validationURL}).then((n=>{e.completeMerchantValidation(n.merchantSession)})).catch((n=>{console.error(n),m.onClose(),e.abort()}))},e.onshippingcontactselected=n=>{m.onShippingContactSelect(n,e)},e.onshippingmethodselected=n=>{m.onShippingMethodSelect(n,e)},e.onpaymentauthorized=async t=>{m.onPaymentAuthorized(t,e,n)},e.oncancel=()=>{m.onClose()},m.onValidate().then((n=>{n?e.begin():e.abort()})).catch((n=>{console.error("Validation error:",n),e.abort()}))}var P=function(e,n){if(!e||!n)throw new Error("Apple Pay requires both context and element.");m=e,w=n;const t={"client-id":m.productionClientId,intent:m.intent,components:"applepay",currency:m.currency};"sandbox"===m.environment&&(t["client-id"]=m.sandboxClientId,t["buyer-country"]=m.buyerCountry),y.create("https://www.paypal.com/sdk/js",t,h,m.pageType).then((()=>new Promise(((e,n)=>"https:"!==window.location.protocol?(console.warn("PPCP Apple Pay requires your checkout be served over HTTPS"),void n(new Error("Apple Pay requires HTTPS."))):!0!==(window.ApplePaySession&&window.ApplePaySession.canMakePayments())?(console.warn("PPCP Apple Pay is not supported on this device/browser"),void n(new Error("Apple Pay is not supported on this device/browser."))):void window[`paypal_${h}`].Applepay().config().then((e=>e.isEligible?m.getPaymentRequest(e):(console.warn("PPCP Apple Pay is not eligible"),void n(new Error("Apple Pay is not eligible."))))).then((n=>{g=n,e()})).catch((e=>{console.error("Error while fetching Apple Pay configuration:",e),n(new Error("Error fetching Apple Pay configuration.")),m.onClose()})))))).then((()=>new Promise((e=>{const n=document.createElement("apple-pay-button");n.onclick=b,document.getElementById(w).appendChild(n),e()}))))};const f=P,C=t;const E=t,v="ppcp_card_new";let I,_;function A(){if(window[`paypal_${v}`]){!function(e){const n=I.cardFields.numberField,t=I.cardFields.cvvField,o=I.cardFields.expiryField;if(e.isEligible()){const r=document.querySelector(n.id),a=document.querySelector(t.id),i=document.querySelector(o.id),c=e.NumberField({placeholder:n.placeholder,inputEvents:{onBlur:e=>n.inputEvents.blur(e,r),onFocus:()=>{}}}),l=e.CVVField({placeholder:t.placeholder,inputEvents:{onBlur:e=>t.inputEvents.blur(e,a),onFocus:()=>{}}}),s=e.ExpiryField({placeholder:o.placeholder,inputEvents:{onBlur:e=>o.inputEvents.blur(e,i),onFocus:()=>{}}});""===r.innerHTML.trim()&&c.render(n.id),""===a.innerHTML.trim()&&l.render(t.id),""===i.innerHTML.trim()&&s.render(o.id),document.querySelector(_).addEventListener("click",(async()=>{try{const n=await I.onValidate(),t=await e.getState();if(t.isFormValid&&n)try{await e.submit()}catch(e){console.error(e),I.handleErrors("Cannot validate payment.")}else I.handleErrors(t.errors)}catch(e){console.error("Validation error:",e)}}))}}(window[`paypal_${v}`].CardFields({createOrder:()=>I.createOrder(),onApprove:()=>I.onApprove(),style:I.style}))}else I.active(!1)}var S=function(e,n){if(!e||!n)throw new Error("Card Payments requires both context and element.");I=e,_=n;const t={"client-id":I.productionClientId,intent:I.intent,components:"card-fields",currency:I.currency};"sandbox"===I.environment&&(t["client-id"]=I.sandboxClientId,t["buyer-country"]=I.buyerCountry),E.create("https://www.paypal.com/sdk/js",t,v,I.pageType).then((()=>A()))};const k=t;let T,M,x;function N(e){T.onValidate().then((n=>{if(!n)return!1;const t={...e},o=["PAYMENT_AUTHORIZATION"],r=T.onPaymentDataChanged;r&&o.push("SHIPPING_ADDRESS","SHIPPING_OPTION"),t.allowedPaymentMethods=e.allowedPaymentMethods,t.transactionInfo={countryCode:e.countryCode,currencyCode:T.transactionInfo.currencyCode,totalPriceStatus:T.transactionInfo.totalPriceStatus,totalPrice:T.transactionInfo.totalPrice},t.merchantInfo=e.merchantInfo,t.shippingAddressRequired=!!r,t.shippingAddressParameters={phoneNumberRequired:!!r},t.emailRequired=!0,t.shippingOptionRequired=!!r,t.callbackIntents=o,delete t.countryCode,delete t.isEligible,M.loadPaymentData(t).catch((e=>{"CANCELED"===e.statusCode||"AbortError"===e.name?(console.warn("User canceled the Google Pay payment UI"),T.onCancel&&T.onCancel()):(console.error("Google Pay Error:",e),T.onError&&T.onError(e))}))})).catch((e=>{console.error("Validation error:",e)}))}var O=function(e,n){if(!e||!n)throw new Error("Google Payments requires both context and element.");if("function"!=typeof e.placeOrder)return console.error("PPCP Google Pay Context passed does not provide a placeOrder method",e);T=e;const t={"client-id":T.productionClientId,intent:T.intent,components:"googlepay",currency:T.transactionInfo.currencyCode};"sandbox"===T.environment&&(t["client-id"]=T.sandboxClientId,t["buyer-country"]=T.buyerCountry),k.create("https://www.paypal.com/sdk/js",t,"ppcp_googlepay",T.pageType).then((()=>new Promise(((e,n)=>{if("https:"!==window.location.protocol)return console.warn("Google Pay requires your checkout be served over HTTPS"),void n(new Error("Insecure protocol: HTTPS is required for Google Pay"));x=window.paypal_ppcp_googlepay.Googlepay(),x.config().then((t=>{t.isEligible?(t.allowedPaymentMethods.forEach((e=>{e.parameters.billingAddressParameters.phoneNumberRequired=!0})),e(t)):n(new Error("Device not eligible for Google Pay"))})).catch((e=>{n(e)}))})))).then((e=>function(e){const n={onPaymentAuthorized:e=>T.onPaymentAuthorized(e,x)};return T.onPaymentDataChanged&&(n.onPaymentDataChanged=n=>T.onPaymentDataChanged(n,e)),M=new window.google.payments.api.PaymentsClient({environment:"sandbox"===T.environment?"TEST":"PRODUCTION",paymentDataCallbacks:n}),M.isReadyToPay({apiVersion:e.apiVersion,apiVersionMinor:e.apiVersionMinor,allowedPaymentMethods:e.allowedPaymentMethods}).then((n=>n.result?e:null))}(e))).then((e=>function(e){return M.createButton({allowedPaymentMethods:e.allowedPaymentMethods,buttonColor:T.button.buttonColor.toLowerCase(),buttonSizeMode:"fill",onClick:T.beforeOnClick?()=>T.beforeOnClick().then((()=>N(e))):()=>N(e)})}(e))).then((e=>{if(e){document.getElementById(n).appendChild(e)}})).catch((e=>{console.error("Error initializing Google Pay Button:",e)}))};const $=O,B=t;const q=t,L="ppcp_paypal_new";let F,V,G;const D={};function R(){return new Promise((e=>{G.forEach((e=>{const n={createOrder:F.createOrder,onApprove:F.onApprove,onClick:F.onClick,onCancel:F.onCancel,onError:e=>F.onError(e),onShippingAddressChange:e=>F.onShippingAddressChange(e),onShippingOptionsChange:e=>F.onShippingOptionsChange(e)};n.fundingSource=e,n.style=function(e){const{[e]:{buttonColor:n,buttonLabel:t,buttonShape:o}}=F.buttonStyles||{};return{color:n,label:t,shape:o,height:F.buttonHeight?F.buttonHeight:40}}(e),n.message=function(e){if("paylater"===e&&F.isPayLaterMessagingEnabled&&"checkout"===F.pageType){const e=F.messageStyles.text||{};return{align:e.align,amount:F.amount,color:"black"!==e.color||"white"!==e.color?"black":e.color}}return null}(e),D[e]=window[`paypal_${L}`].Buttons(n)})),e()}))}var H=function(e,n){if(!e||!n)throw new Error("PaypalButtons requires both context and element.");F=e,V=n;const t={"client-id":F.productionClientId,intent:F.intent,components:"buttons",currency:F.currency};"sandbox"===F.environment&&(t["client-id"]=F.sandboxClientId,t["buyer-country"]=F.buyerCountry),F.isPayLaterMessagingEnabled&&(t.components+=",messages"),F.isPayLaterEnabled&&(t["enable-funding"]="paylater"),q.create("https://www.paypal.com/sdk/js",t,L,F.pageType).then((()=>new Promise((e=>{const n=[window[`paypal_${L}`].FUNDING.PAYPAL];F.isPayLaterEnabled&&n.push(window[`paypal_${L}`].FUNDING.PAYLATER),G=n.filter((e=>{const n=`${V}-${e}`;return document.getElementById(n)?document.getElementById(n):(console.error("Paypal button element does not exist",n),null)})),e()})))).then((()=>R())).then((()=>{Object.keys(D).forEach((e=>{const n=document.getElementById(`${V}-${e}`),t=0===n.childNodes.length;D[e].isEligible()&&n&&t&&D[e].render(n)}))})).catch((e=>{console.error("Error initializing PayPal Buttons:",e)}))};const U=H;const j=t,z="ppcp_paypal_messages";let Y,Z;const J={components:"messages"};function K(){if(window[`paypal_${z}`].Messages){const e=window[`paypal_${z}`].Messages(Y.messageConfig),n=document.getElementById(Z);e.render(n)}else j.create("https://www.paypal.com/sdk/js",J,z,Y.pageType).then((()=>K()))}const Q=function(e,n){if(!e||!n)throw new Error("PaypalElements requires both context and element.");Y=e,Z=n,J["client-id"]=Y.clientId,K()};const W=t,X="ppcp_paypal_venmo";let ee,ne,te;function oe(){return new Promise((e=>{const n=window[`paypal_${X}`].FUNDING.VENMO,t={createOrder:ee.createOrder,onApprove:ee.onApprove,onClick:ee.onClick,onError:ee.onError,onCancel:ee.onCancel,fundingSource:n};t.style=function(){const e=ee.buttonStyles;return{color:"gold"===e.buttonColor?"blue":e.buttonColor,label:e.buttonLabel,shape:e.buttonShape,height:ee.buttonHeight?ee.buttonHeight:40}}(),te=window[`paypal_${X}`].Buttons(t),e()}))}var re=function(e,n){if(!e||!n)throw new Error("Venmo button requires both context and element.");ee=e,ne=n;const t={"client-id":ee.productionClientId,intent:ee.intent,components:"buttons",currency:ee.currency,"enable-funding":"venmo"};"sandbox"===ee.environment&&(t["client-id"]=ee.sandboxClientId,t["buyer-country"]=ee.buyerCountry),W.create("https://www.paypal.com/sdk/js",t,X,ee.pageType).then((()=>oe())).then((()=>{const e=document.getElementById(ne),n=0===e.childNodes.length;te.isEligible()&&e&&n&&te.render(e)})).catch((e=>{console.error("Error initializing Venmo Button:",e)}))};const ae=re;var ie=e({apmPayments:function(e,n){return new u(e,n)},applePayment:function(e,n){return C.create("https://applepay.cdn-apple.com/jsapi/v1.1.0/apple-pay-sdk.js",{},"",e.pageType),new f(e,n)},cardPayment:S,googlePayment:function(e,n){return B.create("https://pay.google.com/gp/p/js/pay.js",{},"ppcp_pay",e.pageType),new $(e,n)},paypalButtons:function(e,n){return new U(e,n)},paypalMessages:function(e,n){return new Q(e,n)},venmoPayment:function(e,n){return new ae(e,n)}});export{ie as p};

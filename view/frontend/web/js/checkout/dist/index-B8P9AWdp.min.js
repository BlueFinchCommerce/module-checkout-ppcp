function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const n={};var t={create:(e,t,o,r,a)=>{let i=e;t&&(i=new URL(i),i.search=new URLSearchParams(t),i=decodeURIComponent(i.href));const c=((e,n,t="")=>e+n+t)(i,o,a),l=()=>{const e=new CustomEvent("ppcpScriptLoaded",{detail:o});document.dispatchEvent(e)};return n[c]?(l(),n[c]):(n[c]=new Promise((e=>{const n=document.createElement("script");n.src=i,n.dataset.namespace=`paypal_${o}`,n.dataset.partnerAttributionId="GENE_PPCP",n.dataset.pageType=r||"checkout",a&&(n.dataset.userIdToken=a),n.onload=()=>{l(),e()},document.head.appendChild(n)})),n[c])}};const o=t,r="ppcp_apm_payments";let a,i,c,l;function s(e){if(!window[`paypal_${r}`])return;const n=window[`paypal_${r}`].FUNDING[e.toUpperCase()];i=window[`paypal_${r}`].Marks({fundingSource:n}),c=window[`paypal_${r}`].PaymentFields({fundingSource:n}),l=window[`paypal_${r}`].Buttons({fundingSource:n,createOrder:()=>a.createOrder(e),onApprove:()=>a.onApprove(e),onClick:a.onClick,onError:a.onError,onCancel:()=>a.onCancel(e)}),function(e){const n=document.getElementById(`paypal_${e}_mark`);if(!n)return;const t=0===n.childNodes.length;i.isEligible()&&n&&t&&i.render(n)}(e),function(e){const n=document.getElementById(`paypal_${e}_fields`);if(!n)return;const t=0===n.childNodes.length;c.isEligible()&&n&&t&&c.render(n)}(e),function(e){const n=document.getElementById(`paypal_${e}_button`);if(!n)return;const t=0===n.childNodes.length;l.isEligible()&&n&&t&&(l.render(n),a.isPaymentMethodAvailable(l.isEligible(),e))}(e)}var p=function(e,n){if(!e||!n)throw new Error("APM payments requires both context and element.");a=e;const t={"client-id":a.productionClientId,intent:"capture",components:"buttons,marks,funding-eligibility,payment-fields",currency:a.currency};"sandbox"===a.environment&&(t["client-id"]=a.sandboxClientId,t["buyer-country"]=a.buyerCountry),o.create("https://www.paypal.com/sdk/js",t,r,a.pageType).catch((e=>{console.error("Error initializing APM Payments:",e)})),document.addEventListener("ppcpScriptLoaded",(e=>{e.detail===r&&s(n)}))};const d=p;const u=t,y="ppcp_applepay";let h,m,g;function w(){const e=new window.ApplePaySession(4,g),n=window[`paypal_${y}`].Applepay();e.onvalidatemerchant=t=>{n.validateMerchant({validationUrl:t.validationURL}).then((n=>{e.completeMerchantValidation(n.merchantSession)})).catch((n=>{console.error(n),h.onClose(),e.abort()}))},e.onshippingcontactselected=n=>{h.onShippingContactSelect(n,e)},e.onshippingmethodselected=n=>{h.onShippingMethodSelect(n,e)},e.onpaymentauthorized=async t=>{h.onPaymentAuthorized(t,e,n)},e.oncancel=()=>{h.onClose()},h.onValidate().then((n=>{n?e.begin():e.abort()})).catch((n=>{console.error("Validation error:",n),e.abort()}))}var b=function(e,n){if(!e||!n)throw new Error("Apple Pay requires both context and element.");h=e,m=n;const t={"client-id":h.productionClientId,intent:h.intent,components:"applepay",currency:h.currency};"sandbox"===h.environment&&(t["client-id"]=h.sandboxClientId,t["buyer-country"]=h.buyerCountry),u.create("https://www.paypal.com/sdk/js",t,y,h.pageType).then((()=>new Promise(((e,n)=>"https:"!==window.location.protocol?(console.warn("PPCP Apple Pay requires your checkout be served over HTTPS"),void n(new Error("Apple Pay requires HTTPS."))):!0!==(window.ApplePaySession&&window.ApplePaySession.canMakePayments())?(console.warn("PPCP Apple Pay is not supported on this device/browser"),void n(new Error("Apple Pay is not supported on this device/browser."))):void window[`paypal_${y}`].Applepay().config().then((e=>e.isEligible?h.getPaymentRequest(e):(console.warn("PPCP Apple Pay is not eligible"),void n(new Error("Apple Pay is not eligible."))))).then((n=>{g=n,e()})).catch((e=>{console.error("Error while fetching Apple Pay configuration:",e),n(new Error("Error fetching Apple Pay configuration.")),h.onClose()})))))).then((()=>new Promise((e=>{const n=document.createElement("apple-pay-button");n.onclick=w,document.getElementById(m).appendChild(n),e()}))))};const P=b,f=t;const E=t,C="ppcp_card";let v,I;function A(){if(window[`paypal_${C}`]){!function(e){const n=v.cardFields.numberField,t=v.cardFields.cvvField,o=v.cardFields.expiryField;if(e.isEligible()){const r=document.querySelector(n.id),a=document.querySelector(t.id),i=document.querySelector(o.id),c=e.NumberField({placeholder:n.placeholder,inputEvents:{onBlur:e=>n.inputEvents.blur(e,r),onFocus:()=>{}}}),l=e.CVVField({placeholder:t.placeholder,inputEvents:{onBlur:e=>t.inputEvents.blur(e,a),onFocus:()=>{}}}),s=e.ExpiryField({placeholder:o.placeholder,inputEvents:{onBlur:e=>o.inputEvents.blur(e,i),onFocus:()=>{}}});""===r.innerHTML.trim()&&c.render(n.id),""===a.innerHTML.trim()&&l.render(t.id),""===i.innerHTML.trim()&&s.render(o.id),document.querySelector(I).addEventListener("click",(async()=>{try{const n=await v.onValidate(),t=await e.getState();if(t.isFormValid&&n)try{await e.submit()}catch(e){console.error(e),v.handleErrors("Cannot validate payment.")}else v.handleErrors(t.errors)}catch(e){console.error("Validation error:",e)}}))}}(window[`paypal_${C}`].CardFields({createOrder:()=>v.createOrder(),onApprove:()=>v.onApprove(),style:v.style}))}else v.active(!1)}var S=function(e,n){if(!e||!n)throw new Error("Card Payments requires both context and element.");v=e,I=n;const t={"client-id":v.productionClientId,intent:v.intent,components:"card-fields",currency:v.currency};"sandbox"===v.environment&&(t["client-id"]=v.sandboxClientId,t["buyer-country"]=v.buyerCountry),E.create("https://www.paypal.com/sdk/js",t,C,v.pageType).then((()=>A()))};const _=t;let k,T,M;function x(e){k.onValidate().then((n=>{if(!n)return!1;const t={...e},o=["PAYMENT_AUTHORIZATION"],r=k.onPaymentDataChanged;r&&o.push("SHIPPING_ADDRESS","SHIPPING_OPTION"),t.allowedPaymentMethods=e.allowedPaymentMethods,t.transactionInfo={countryCode:e.countryCode,currencyCode:k.transactionInfo.currencyCode,totalPriceStatus:k.transactionInfo.totalPriceStatus,totalPrice:k.transactionInfo.totalPrice},t.merchantInfo=e.merchantInfo,t.shippingAddressRequired=!!r,t.shippingAddressParameters={phoneNumberRequired:!!r},t.emailRequired=!0,t.shippingOptionRequired=!!r,t.callbackIntents=o,delete t.countryCode,delete t.isEligible,T.loadPaymentData(t).catch((e=>{"CANCELED"===e.statusCode||"AbortError"===e.name?(console.warn("User canceled the Google Pay payment UI"),k.onCancel&&k.onCancel()):(console.error("Google Pay Error:",e),k.onError&&k.onError(e))}))})).catch((e=>{console.error("Validation error:",e)}))}var N=function(e,n){if(!e||!n)throw new Error("Google Payments requires both context and element.");if("function"!=typeof e.placeOrder)return console.error("PPCP Google Pay Context passed does not provide a placeOrder method",e);k=e;const t={"client-id":k.productionClientId,intent:k.intent,components:"googlepay",currency:k.transactionInfo.currencyCode};"sandbox"===k.environment&&(t["client-id"]=k.sandboxClientId,t["buyer-country"]=k.buyerCountry),_.create("https://www.paypal.com/sdk/js",t,"ppcp_googlepay",k.pageType).then((()=>new Promise(((e,n)=>{if("https:"!==window.location.protocol)return console.warn("Google Pay requires your checkout be served over HTTPS"),void n(new Error("Insecure protocol: HTTPS is required for Google Pay"));M=window.paypal_ppcp_googlepay.Googlepay(),M.config().then((t=>{t.isEligible?(t.allowedPaymentMethods.forEach((e=>{e.parameters.billingAddressParameters.phoneNumberRequired=!0})),e(t)):n(new Error("Device not eligible for Google Pay"))})).catch((e=>{n(e)}))})))).then((e=>function(e){const n={onPaymentAuthorized:e=>k.onPaymentAuthorized(e,M)};return k.onPaymentDataChanged&&(n.onPaymentDataChanged=n=>k.onPaymentDataChanged(n,e)),T=new window.google.payments.api.PaymentsClient({environment:"sandbox"===k.environment?"TEST":"PRODUCTION",paymentDataCallbacks:n}),T.isReadyToPay({apiVersion:e.apiVersion,apiVersionMinor:e.apiVersionMinor,allowedPaymentMethods:e.allowedPaymentMethods}).then((n=>n.result?e:null))}(e))).then((e=>function(e){return T.createButton({allowedPaymentMethods:e.allowedPaymentMethods,buttonColor:k.button.buttonColor.toLowerCase(),buttonSizeMode:"fill",onClick:k.beforeOnClick?()=>k.beforeOnClick().then((()=>x(e))):()=>x(e)})}(e))).then((e=>{if(e){document.getElementById(n).appendChild(e)}})).catch((e=>{console.error("Error initializing Google Pay Button:",e)}))};const O=N,$=t;const B=t,q="ppcp_paypal";let L,F,V;const G={};function D(){return new Promise((e=>{V.forEach((e=>{const n={createOrder:L.createOrder,onApprove:L.onApprove,onClick:L.onClick,onCancel:L.onCancel,onError:e=>L.onError(e),onShippingAddressChange:e=>L.onShippingAddressChange(e),onShippingOptionsChange:e=>L.onShippingOptionsChange(e)};n.fundingSource=e,n.style=function(e){const{[e]:{buttonColor:n,buttonLabel:t,buttonShape:o}}=L.buttonStyles||{};return{color:n,label:t,shape:o,height:L.buttonHeight?L.buttonHeight:40}}(e),n.message=function(e){if("paylater"===e&&L.isPayLaterMessagingEnabled&&"checkout"===L.pageType){const e=L.messageStyles.text||{};return{align:e.align,amount:L.amount,color:"black"!==e.color||"white"!==e.color?"black":e.color}}return null}(e),G[e]=window[`paypal_${q}`].Buttons(n)})),e()}))}var R=function(e,n){if(!e||!n)throw new Error("PaypalButtons requires both context and element.");L=e,F=n;const t={"client-id":L.productionClientId,intent:L.intent,components:"buttons",currency:L.currency};"sandbox"===L.environment&&(t["client-id"]=L.sandboxClientId,t["buyer-country"]=L.buyerCountry),L.isPayLaterMessagingEnabled&&(t.components+=",messages"),L.isPayLaterEnabled&&(t["enable-funding"]="paylater"),B.create("https://www.paypal.com/sdk/js",t,q,L.pageType).then((()=>new Promise((e=>{const n=[window[`paypal_${q}`].FUNDING.PAYPAL];L.isPayLaterEnabled&&n.push(window[`paypal_${q}`].FUNDING.PAYLATER),V=n.filter((e=>{const n=`${F}-${e}`;return document.getElementById(n)?document.getElementById(n):(console.error("Paypal button element does not exist",n),null)})),e()})))).then((()=>D())).then((()=>{Object.keys(G).forEach((e=>{const n=document.getElementById(`${F}-${e}`),t=0===n.childNodes.length;G[e].isEligible()&&n&&t&&G[e].render(n),L.isPaymentMethodEligible(G[e].isEligible(),e)}))})).catch((e=>{console.error("Error initializing PayPal Buttons:",e)}))};const H=R;const U=t,j="ppcp_paypal_messages";let z,Y;const Z={components:"messages"};function J(){if(window[`paypal_${j}`].Messages){const e=window[`paypal_${j}`].Messages(z.messageConfig),n=document.getElementById(Y);e.render(n)}else U.create("https://www.paypal.com/sdk/js",Z,j,z.pageType).then((()=>J()))}const K=function(e,n){if(!e||!n)throw new Error("PaypalElements requires both context and element.");z=e,Y=n,Z["client-id"]=z.clientId,J()};const Q=t,W="ppcp_paypal_venmo";let X,ee,ne;function te(){return new Promise((e=>{const n=window[`paypal_${W}`].FUNDING.VENMO,t={createOrder:X.createOrder,onApprove:X.onApprove,onClick:X.onClick,onError:X.onError,onCancel:X.onCancel,fundingSource:n};t.style=function(){const e=X.buttonStyles;return{color:"gold"===e.buttonColor?"blue":e.buttonColor,label:e.buttonLabel,shape:e.buttonShape,height:X.buttonHeight?X.buttonHeight:40}}(),ne=window[`paypal_${W}`].Buttons(t),e()}))}var oe=function(e,n){if(!e||!n)throw new Error("Venmo button requires both context and element.");X=e,ee=n;const t={"client-id":X.productionClientId,intent:X.intent,components:"buttons",currency:X.currency,"enable-funding":"venmo"};"sandbox"===X.environment&&(t["client-id"]=X.sandboxClientId,t["buyer-country"]=X.buyerCountry),Q.create("https://www.paypal.com/sdk/js",t,W,X.pageType).then((()=>te())).then((()=>{const e=document.getElementById(ee),n=0===e.childNodes.length;ne.isEligible()&&e&&n&&ne.render(e),X.isPaymentMethodEligible(ne.isEligible())})).catch((e=>{console.error("Error initializing Venmo Button:",e)}))};const re=oe;var ae=e({apmPayments:function(e,n){return new d(e,n)},applePayment:function(e,n){return f.create("https://applepay.cdn-apple.com/jsapi/v1.1.0/apple-pay-sdk.js",{},"",e.pageType),new P(e,n)},cardPayment:S,googlePayment:function(e,n){return $.create("https://pay.google.com/gp/p/js/pay.js",{},"ppcp_pay",e.pageType),new O(e,n)},paypalButtons:function(e,n){return new H(e,n)},paypalMessages:function(e,n){return new K(e,n)},venmoPayment:function(e,n){return new re(e,n)}});export{ae as p};

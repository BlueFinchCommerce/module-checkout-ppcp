function e(){const e=new Map;return async function(t,s,r="paypal",a="checkout",o=""){if(s){const e=new URLSearchParams(s).toString();t=`${t}?${e}`}const n=((e,t,s="")=>`${e}${t}${s}`)(t,r,o);if(e.has(n))return e.get(n);const c=new Promise(((s,c)=>{const d=document.createElement("script");d.src=t,d.dataset.namespace=`paypal_${r}`,d.dataset.partnerAttributionId="GENE_PPCP",d.dataset.pageType=a,o&&(d.dataset.userIdToken=o),d.onload=()=>{const e=new CustomEvent("ppcpScriptLoaded",{detail:r});document.dispatchEvent(e),s()},d.onerror=()=>{e.delete(n),c(new Error(`Failed to load script: ${t}`))},document.head.appendChild(d)}));return e.set(n,c),c}}var t=async e=>{const[t,s,r]=await window.geneCheckout.helpers.loadFromCheckout(["stores.usePaymentStore","stores.useCustomerStore","stores.useCartStore"]),a={"X-Requested-With":"XMLHttpRequest"},{maskedId:o,getMaskedId:n}=r;let c;if(s.customer.tokenType===window.geneCheckout.helpers.getTokenTypes.guestUser)c=o||await n();else{c=(await window.geneCheckout.services.getQuote()).id}try{return(await window.geneCheckout.services.authenticatedRequest().post(await(async()=>{const e=(await window.geneCheckout.helpers.loadFromCheckout(["stores.useCustomerStore"])).customer.tokenType===window.geneCheckout.helpers.getTokenTypes.guestUser?"/ppcp/createGuestOrder":"/ppcp/createOrder";return`${window.geneCheckout.helpers.getBaseRestUrl()}${e}`})(),{cartId:c,method:e},{headers:a})).data}catch(e){return t.setPaymentErrorMessage(e.response.data.message),null}};export{t as c,e as l};

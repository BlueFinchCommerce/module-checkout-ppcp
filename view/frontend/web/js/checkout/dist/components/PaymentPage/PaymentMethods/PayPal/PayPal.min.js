import{m as e,a,g as t,u as s,l as o,c as p,i,d as c,f as n,n as l,b as r,j as d,o as y}from"../../../../createPPCPPaymentRest-hPHXewFr.min.js";var h={name:"PpcpPayPalPayment",data:()=>({isMethodSelected:!1,errorMessage:"",ErrorMessage:null,PrivacyPolicy:null,RadioButton:null,Recaptcha:null,Agreements:null,paymentEmitter:null,isPaymentMethodAvailable:null,selectedMethod:"ppcp_paypal",method:"ppcp_paypal",namespace:"paypal_ppcp_paypal",isRecaptchaVisible:()=>{},orderID:null,paypalLoaded:!1,address:{}}),props:{open:{type:Boolean,required:!1}},computed:{...e(s,["paypal","environment","buyerCountry","productionClientId","sandboxClientId"]),payPalLogo:()=>"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAAAsCAIAAABT1onSAAAFSmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTIgMS4xNDk2MDIsIDIwMTIvMTAvMTAtMTg6MTA6MjQgICAgICAgICI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpkYW09Imh0dHA6Ly93d3cuZGF5LmNvbS9kYW0vMS4wIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICB4bWxuczpQYXlQYWw9Ind3dy5wYXlwYWwuY29tL2Jhc2UvdjEiCiAgIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIgogICBkYzptb2RpZmllZD0iMjAxNC0wNS0xM1QxMTo1OToyNi4wOTMtMDc6MDAiCiAgIGRhbTpzaXplPSIxODM0IgogICBkYW06UGh5c2ljYWx3aWR0aGluaW5jaGVzPSItMS4wIgogICBkYW06ZXh0cmFjdGVkPSIyMDE0LTA1LTEzVDExOjU5OjIzLjYxNC0wNzowMCIKICAgZGFtOnNoYTE9IjRiYTRlNTY3ZWY1YzdhYTA0OTEyZTFmYWYwZmVkN2NhMjlmYjAxZGYiCiAgIGRhbTpOdW1iZXJvZnRleHR1YWxjb21tZW50cz0iMCIKICAgZGFtOkZpbGVmb3JtYXQ9IlBORyIKICAgZGFtOlByb2dyZXNzaXZlPSJubyIKICAgZGFtOlBoeXNpY2FsaGVpZ2h0aW5kcGk9Ii0xIgogICBkYW06TUlNRXR5cGU9ImltYWdlL3BuZyIKICAgZGFtOk51bWJlcm9maW1hZ2Vz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"},async mounted(){const{default:{components:{ErrorMessage:e,PrivacyPolicy:a,RadioButton:t,Recaptcha:s,Agreements:o}}}=await import(window.geneCheckout.main);this.Agreements=o,this.ErrorMessage=e,this.RadioButton=t,this.Recaptcha=s,this.PrivacyPolicy=a},async created(){const[e,a,t,s]=await window.geneCheckout.helpers.loadFromCheckout(["stores.useRecaptchaStore","stores.usePaymentStore","stores.useConfigStore","stores.useCartStore"]);this.paymentEmitter=a.paymentEmitter,this.isPaymentMethodAvailable=a.isPaymentMethodAvailable,this.isRecaptchaVisible=e.isRecaptchaVisible,a.$subscribe((e=>{void 0!==e.payload.selectedMethod&&(this.selectedMethod=e.payload.selectedMethod)})),this.paymentEmitter.on("changePaymentMethodDisplay",(({visible:e})=>{this.paymentVisible=e})),await t.getInitialConfig(),await s.getCart(),await this.addScripts(),this.namespace=`${this.namespace}`,this.paypal.payLaterActive&&(this.namespace=`${this.method}_paylater`),await this.renderPaypalInstance(),this.open&&await this.selectPaymentMethod()},watch:{selectedMethod:{handler(e){null!==e&&"ppcp_paypal"!==e&&(this.isMethodSelected=!1)},immediate:!0,deep:!0}},methods:{...a(s,["makePayment"]),async selectPaymentMethod(){this.isMethodSelected=!0;(await window.geneCheckout.helpers.loadFromCheckout("stores.usePaymentStore")).selectPaymentMethod("ppcp_paypal")},async addScripts(){const e=await window.geneCheckout.helpers.loadFromCheckout(["stores.useConfigStore"]),a=o(),t={intent:this.paypal.paymentAction,currency:e.currencyCode,components:"buttons"};return"sandbox"===this.environment?(t["buyer-country"]=this.buyerCountry,t["client-id"]=this.sandboxClientId):t["client-id"]=this.productionClientId,this.paypal.payLaterMessageActive&&(t.components+=",messages"),this.paypal.payLaterActive&&(t["enable-funding"]="paylater"),a("https://www.paypal.com/sdk/js",t,"ppcp_paypal")},async renderPaypalInstance(){const e=await window.geneCheckout.helpers.loadFromCheckout(["stores.useCartStore"]),a=window[`paypal_${this.method}`];if(a){const s={env:this.environment,commit:!0,style:{label:this.paypal.buttonLabel,size:"responsive",shape:this.paypal.buttonShape,color:this.paypal.buttonColor,tagline:!1},fundingSource:this.paypal.payLaterActive?a.FUNDING.PAYLATER:a.FUNDING.PAYPAL,createOrder:async()=>{try{const e=await t(this.method,this.paypal.vaultActive,1),a=JSON.parse(e),[s]=a;return this.orderID=s,this.orderID}catch(e){return console.error("Error during createOrder:",e),null}},onClick:async()=>{const[e,a,t]=await window.geneCheckout.helpers.loadFromCheckout(["stores.usePaymentStore","stores.useAgreementStore","stores.useLoadingStore"]);e.setErrorMessage("");return!!a.validateAgreements()&&(t.setLoadingState(!0),!0)},onApprove:async()=>{const[a,t]=await window.geneCheckout.helpers.loadFromCheckout(["stores.usePaymentStore","stores.useLoadingStore"]);return this.makePayment(e.cart.email,this.orderID,this.method,!1).then((()=>window.geneCheckout.services.refreshCustomerData(["cart"]))).then((()=>{window.location.href=window.geneCheckout.helpers.getSuccessPageUrl()})).catch((e=>{t.setLoadingState(!1);try{window.geneCheckout.helpers.handleServiceError(e)}catch(e){a.setErrorMessage(e)}}))},onCancel:async()=>{(await window.geneCheckout.helpers.loadFromCheckout(["stores.useLoadingStore"])).setLoadingState(!1)},onError:async e=>{const[a,t]=await window.geneCheckout.helpers.loadFromCheckout(["stores.usePaymentStore","stores.useLoadingStore"]);t.setLoadingState(!1),a.setErrorMessage(e)}},o={...s,fundingSource:a.FUNDING.PAYPAL};if(await a.Buttons(o).render("#ppcp-paypal_ppcp_paypal"),this.paypal.payLaterActive){const e={...s,fundingSource:a.FUNDING.PAYLATER,style:{...s.style,color:this.paypal.payLaterButtonColour,shape:this.paypal.payLaterButtonShape}};await a.Buttons(e).render("#ppcp-paypal_ppcp_paylater")}const p={amount:e.cart.total,style:{layout:this.paypal.payLaterMessageLayout,logo:{type:this.paypal.payLaterMessageLogoType,position:this.paypal.payLaterMessageLogoPosition},text:{size:this.paypal.payLaterMessageTextSize,color:this.paypal.payLaterMessageColour,align:this.paypal.payLaterMessageTextAlign}}};this.paypal.payLaterMessageActive&&await a.Messages(p).render("#ppcp-paypal_messages"),this.paypalLoaded=!0}},redirectToSuccess(){window.location.href=window.geneCheckout.helpers.getSuccessPageUrl()}}};const g=["src"],m={key:1,class:"pay-pal-content"};h.render=function(e,a,t,s,o,h){return y(),p("div",{class:l([{active:o.isMethodSelected},"pay-pal-container"])},[i("div",{class:l(["pay-pal-title",o.isMethodSelected?"selected":""]),onClick:a[0]||(a[0]=(...e)=>h.selectPaymentMethod&&h.selectPaymentMethod(...e)),onKeydown:a[1]||(a[1]=(...e)=>h.selectPaymentMethod&&h.selectPaymentMethod(...e))},[(y(),c(n(o.RadioButton),{id:"pay-pal-select",text:e.paypal.title,checked:o.isMethodSelected,"data-cy":"pay-pal-radio",class:"pay-pal-radio",onClick:h.selectPaymentMethod,onKeydown:h.selectPaymentMethod},null,40,["text","checked","onClick","onKeydown"])),i("img",{width:"48px",class:"pay-pal-logo",src:h.payPalLogo,alt:"pay-pal-logo"},null,8,g)],34),o.errorMessage?(y(),c(n(o.ErrorMessage),{key:0,message:o.errorMessage,attached:!1},null,8,["message"])):r("v-if",!0),i("div",{style:d({display:o.isMethodSelected?"block":"none"}),class:l(["paypal-button-container",o.paypalLoaded?"":"text-loading"]),id:"ppcp-paypal_ppcp_paypal","data-cy":"instant-checkout-ppcpPayPal"},null,6),i("div",{style:d({display:o.isMethodSelected?"block":"none"}),class:l(["paypal-button-container",o.paypalLoaded?"":"text-loading"]),id:"ppcp-paypal_ppcp_paylater","data-cy":"instant-checkout-ppcpPayLater"},null,6),i("div",{style:d({display:o.isMethodSelected?"block":"none"}),class:l([o.paypalLoaded?"":"text-loading","paypal-messages-container"]),id:"ppcp-paypal_messages","data-cy":"instant-checkout-ppcpMessages"},null,6),o.isMethodSelected?(y(),p("div",m,[(y(),c(n(o.PrivacyPolicy))),o.isRecaptchaVisible("placeOrder")?(y(),c(n(o.Recaptcha),{key:0,id:"placeOrder",location:"ppcpPayment"})):r("v-if",!0),(y(),c(n(o.Agreements),{id:"ppcp-checkout-pay-pal"}))])):r("v-if",!0)],2)},h.__file="src/components/PaymentPage/PaymentMethods/PayPal/PayPal.vue";export{h as default};
